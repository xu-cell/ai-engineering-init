---
name: architecture-design
description: |
  ç³»ç»Ÿæ¶æ„è®¾è®¡ã€æ¨¡å—åˆ’åˆ†ã€ä»£ç é‡æ„ã€æŠ€æœ¯æ ˆé€‰å‹ã€‚æ ¸å¿ƒå†…å®¹ï¼šä¸‰å±‚æ¶æ„è§„èŒƒã€ä¸šåŠ¡æ¨¡å—åˆ’åˆ†ã€è¡¨è®¾è®¡è§„èŒƒã€æŠ€æœ¯æ ˆä¼˜å…ˆçº§å†³ç­–ã€‚

  è§¦å‘åœºæ™¯ï¼š
  - ç³»ç»Ÿæ•´ä½“æ¶æ„è®¾è®¡
  - æ–°ä¸šåŠ¡æ¨¡å—çš„æ¨¡å—åˆ’åˆ†ä¸ç»“æ„è§„åˆ’
  - ä»£ç åˆ†å±‚ä¸é‡æ„ç­–ç•¥
  - ä¾èµ–å…³ç³»æ¢³ç†ä¸è§£è€¦
  - æ¶æ„æ¼”è¿›è·¯å¾„å»ºè®®ï¼ˆä»å•ä½“åˆ°å¾®æœåŠ¡ï¼‰
  - é¢†åŸŸè¾¹ç•Œåˆ’åˆ†ä¸åŒ…ç»“æ„è®¾è®¡
  - æŠ€æœ¯æ ˆé€‰å‹ä¸æ–¹æ¡ˆå†³ç­–

  è§¦å‘è¯ï¼šæ¶æ„è®¾è®¡ã€æ¨¡å—åˆ’åˆ†ã€ä¸‰å±‚æ¶æ„ã€åˆ†å±‚ã€é¢†åŸŸåˆ’åˆ†ã€é‡æ„ã€è§£è€¦ã€ä¾èµ–ç®¡ç†ã€ç³»ç»Ÿè®¾è®¡ã€ä»£ç ç»„ç»‡ã€æŠ€æœ¯æ ˆã€æ¶æ„æ¼”è¿›

  æ³¨æ„ï¼š
  1. å…·ä½“æŠ€æœ¯å¯¹æ¯”ï¼ˆRedis vs æœ¬åœ°ç¼“å­˜ï¼‰â†’ ä½¿ç”¨ tech-decision
  2. å¼€å‘å…·ä½“ CRUD æ¨¡å— â†’ ä½¿ç”¨ crud-development
  3. æ•°æ®åº“å»ºè¡¨ä¸å­—å…¸é…ç½® â†’ ä½¿ç”¨ database-ops
  4. æœ¬é¡¹ç›®æ˜¯çº¯åç«¯é¡¹ç›®ï¼ˆæ— å‰ç«¯ä»£ç ï¼‰
---

# æ¶æ„è®¾è®¡æŒ‡å—

## æœ¬é¡¹ç›®æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯æ¶æ„

| å±‚çº§ | æŠ€æœ¯æ ˆ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|--------|------|------|
| **åç«¯æ¡†æ¶** | Spring Boot | 3.5.9 | æ ¸å¿ƒæ¡†æ¶ |
| **å¼€å‘è¯­è¨€** | Java | 17 | LTS ç‰ˆæœ¬ |
| **ORM** | MyBatis-Plus | 3.5.16 | æŒä¹…å±‚æ¡†æ¶ |
| **å®‰å…¨** | Sa-Token | 1.44.0 | è®¤è¯æˆæƒ |
| **æ•°æ®åº“** | MySQL 8.0+ | 8.0+ | ä¸»æ•°æ®åº“ï¼ˆæ”¯æŒå¤šåº“ï¼‰ |
| **ç¼“å­˜** | Redis + Redisson | 3.52.0 | åˆ†å¸ƒå¼ç¼“å­˜ |
| **æ–‡æ¡£** | SpringDoc | 2.8.15 | API æ–‡æ¡£ |
| **å·¥å…·åº“** | Hutool | 5.8.43 | Java å·¥å…·é›† |
| **å¯¹è±¡è½¬æ¢** | Mapstruct-Plus | 1.5.0 | BO/VO/Entity æ˜ å°„ |

**æ³¨ï¼š** æœ¬é¡¹ç›®æ˜¯çº¯åç«¯é¡¹ç›®ï¼Œå‰ç«¯é¡¹ç›®ç‹¬ç«‹ç»´æŠ¤ã€‚

### æ‰©å±•æŠ€æœ¯æ ˆï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

#### 1ï¸âƒ£ é«˜ä¼˜å…ˆçº§æŠ€æœ¯ï¼ˆä¼˜å…ˆé€‰æ‹©ï¼‰

| æŠ€æœ¯ | ä¼˜å…ˆçº§ | ä½¿ç”¨åœºæ™¯ | è¯´æ˜ |
|------|--------|---------|------|
| **Redis** | â­â­â­â­â­ | ç¼“å­˜ã€åˆ†å¸ƒå¼é”ã€å»¶è¿Ÿé˜Ÿåˆ— | ä¼˜å…ˆé€‰æ‹©ï¼ˆå·²é›†æˆ Redisson + Caffeineï¼‰ |
| **WebSocket** | â­â­â­â­â­ | å®æ—¶æ¨é€ã€åœ¨çº¿èŠå¤©ã€æ¶ˆæ¯é€šçŸ¥ | å®æ—¶é€šä¿¡é¦–é€‰ï¼ˆå·²é›†æˆï¼‰ |
| **Sa-Token** | â­â­â­â­â­ | æƒé™æ§åˆ¶ã€ç™»å½•è®¤è¯ã€å•ç‚¹ç™»å½• | é¡¹ç›®å®‰å…¨æ ¸å¿ƒ |
| **Lock4j** | â­â­â­â­â­ | åˆ†å¸ƒå¼é” | åŸºäº Redisson å®ç°ï¼ˆå·²é›†æˆï¼‰ |
| **MyBatis-Plus** | â­â­â­â­â­ | ORMã€CRUD | é¡¹ç›®æ•°æ®è®¿é—®æ ¸å¿ƒ |
| **Redisson** | â­â­â­â­â­ | åˆ†å¸ƒå¼å¯¹è±¡ã€å¸ƒéš†è¿‡æ»¤å™¨ã€å»¶è¿Ÿé˜Ÿåˆ— | Redis å®¢æˆ·ç«¯å¢å¼ºï¼ˆå·²é›†æˆï¼‰ |
| **SnailJob** | â­â­â­â­ | åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡ã€å¤æ‚è°ƒåº¦ | é¡¹ç›®å®šæ—¶ä»»åŠ¡æ¡†æ¶ï¼ˆå·²é›†æˆï¼‰ |

#### 2ï¸âƒ£ ä¸­ä¼˜å…ˆçº§æŠ€æœ¯ï¼ˆæŒ‰éœ€ä½¿ç”¨ï¼‰

| æŠ€æœ¯ | ä¼˜å…ˆçº§ | ä½¿ç”¨åœºæ™¯ | è¯´æ˜ |
|------|--------|---------|------|
| **SSE** | â­â­â­â­ | æœåŠ¡ç«¯æ¨é€ã€å•å‘æ¶ˆæ¯ | å®æ—¶é€šçŸ¥åœºæ™¯ï¼ˆå·²é›†æˆï¼‰ |
| **FastExcel** | â­â­â­â­ | Excel å¯¼å…¥å¯¼å‡º | æ¯” EasyExcel æ€§èƒ½æ›´å¥½ï¼ˆå·²é›†æˆï¼‰ |
| **SMS4j** | â­â­â­ | å¤šå¹³å°çŸ­ä¿¡å‘é€ | æ”¯æŒé˜¿é‡Œäº‘ã€è…¾è®¯ã€åä¸ºç­‰ï¼ˆå·²é›†æˆï¼‰ |
| **JustAuth** | â­â­â­ | ç¬¬ä¸‰æ–¹ OAuth ç™»å½• | æ”¯æŒå¾®ä¿¡ã€QQã€æ”¯ä»˜å®ç­‰ 30+ å¹³å°ï¼ˆå·²é›†æˆï¼‰ |
| **AWS S3** | â­â­â­ | å¯¹è±¡å­˜å‚¨æœåŠ¡ | S3 å…¼å®¹åè®®ï¼Œæ”¯æŒ MinIO è‡ªå»ºï¼ˆå·²é›†æˆï¼‰ |
| **MailSender** | â­â­â­ | é‚®ä»¶å‘é€ | æ”¯æŒ SMTPã€ä¼ä¸šé‚®ç®±ï¼ˆå·²é›†æˆï¼‰ |
| **Redis Streams** | â­â­â­ | æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆç®€å•åœºæ™¯ï¼‰ | æ¯” RocketMQ è½»é‡çº§ |

#### 3ï¸âƒ£ æ‰©å±•èƒ½åŠ›ï¼ˆæŒ‰éœ€é›†æˆï¼‰

| æŠ€æœ¯ | ä¼˜å…ˆçº§ | ä½¿ç”¨åœºæ™¯ | é›†æˆçŠ¶æ€ |
|------|--------|---------|---------|
| **æ•°æ®åŠ å¯†** | â­â­â­â­ | æ•æ„Ÿæ•°æ®åŠ å¯†ã€å­—æ®µçº§åŠ å¯† | âœ… å·²é›†æˆ |
| **æ•°æ®è„±æ•** | â­â­â­â­ | èº«ä»½è¯ã€æ‰‹æœºå·è„±æ• | âœ… å·²é›†æˆ |
| **é˜²é‡å¤æäº¤** | â­â­â­â­ | è¡¨å•é˜²é‡å¤ã€API å¹‚ç­‰ | âœ… å·²é›†æˆ |
| **å›½é™…åŒ–ç¿»è¯‘** | â­â­â­ | å¤šè¯­è¨€æ”¯æŒ | âœ… å·²é›†æˆ |
| **å®¡è®¡æ—¥å¿—** | â­â­â­ | æ“ä½œæ—¥å¿—ã€å˜æ›´è¿½æº¯ | âœ… å·²é›†æˆ |
| **æ¥å£é™æµ** | â­â­â­ | æ¥å£é¢‘ç‡é™åˆ¶ã€é˜²æ»¥ç”¨ | âœ… å·²é›†æˆ |

#### 4ï¸âƒ£ éœ€è‡ªè¡Œæ‰©å±•çš„æŠ€æœ¯

| æŠ€æœ¯ | ä½¿ç”¨åœºæ™¯ | è¯´æ˜ |
|------|---------|------|
| **RocketMQ** | é«˜ååæ¶ˆæ¯é˜Ÿåˆ—ã€åˆ†å¸ƒå¼äº‹åŠ¡ | é«˜å¹¶å‘åœºæ™¯å¯è‡ªè¡Œå¼•å…¥ |
| **MQTT** | ç‰©è”ç½‘è®¾å¤‡é€šä¿¡ | IoT åœºæ™¯å¯ä½¿ç”¨ mica-mqtt |
| **LangChain4j** | AI å¤§æ¨¡å‹é›†æˆ | AI ä¸šåŠ¡å¯è‡ªè¡Œé›†æˆ |

### æŠ€æœ¯é€‰å‹å†³ç­–æ ‘

```
éœ€è¦å®æ—¶é€šä¿¡ï¼Ÿ
â”œâ”€ æ˜¯ â†’ WebSocketï¼ˆé¦–é€‰ï¼Œå·²é›†æˆï¼‰
â””â”€ å¦ â†’ éœ€è¦æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ
         â”œâ”€ æ˜¯ â†’ Redis Streamsï¼ˆä¼˜å…ˆï¼Œè½»é‡çº§ï¼‰
         â”‚       æˆ– RocketMQï¼ˆè‡ªè¡Œå¼•å…¥ï¼Œé«˜ååï¼‰
         â””â”€ å¦ â†’ éœ€è¦å®šæ—¶ä»»åŠ¡ï¼Ÿ
                â”œâ”€ æ˜¯ â†’ SnailJobï¼ˆåˆ†å¸ƒå¼ï¼Œå·²é›†æˆï¼‰
                â”‚       æˆ– @Scheduledï¼ˆç®€å•åœºæ™¯ï¼‰
                â””â”€ å¦ â†’ éœ€è¦ç¼“å­˜ï¼Ÿ
                       â””â”€ æ˜¯ â†’ Redis + Redissonï¼ˆé¦–é€‰ï¼Œå·²é›†æˆï¼‰
```

---

## æœ¬é¡¹ç›®æ¶æ„

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®¢æˆ·ç«¯                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     PC Web       â”‚     å°ç¨‹åº        â”‚         App           â”‚
â”‚   (ç‹¬ç«‹é¡¹ç›®)      â”‚   (ç‹¬ç«‹é¡¹ç›®)      â”‚     (ç‹¬ç«‹é¡¹ç›®)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚                     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API ç½‘å…³ (å¯é€‰)                          â”‚
â”‚                   Nginx / Spring Cloud Gateway              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åç«¯æœåŠ¡                                â”‚
â”‚           ruoyi-admin (Spring Boot 3.5.9)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ruoyi-systemâ”‚ â”‚ ruoyi-demo â”‚ â”‚ruoyi-generatorâ”‚ â”‚  ruoyi-job â”‚ â”‚ruoyi-workflowâ”‚â”‚
â”‚  â”‚  ç³»ç»Ÿç®¡ç†   â”‚ â”‚  æ¼”ç¤ºæ¨¡å—  â”‚ â”‚   ä»£ç ç”Ÿæˆ    â”‚ â”‚  å®šæ—¶ä»»åŠ¡  â”‚ â”‚   å·¥ä½œæµ     â”‚â”‚
â”‚  â”‚  (sys_*)   â”‚ â”‚ (test_*)   â”‚ â”‚   (gen_*)     â”‚ â”‚  (job)     â”‚ â”‚  (flow_*)    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ruoyi-common (20+ æ¨¡å—)                   â”‚
â”‚ mybatis/redis/oss/websocket/satoken/job/sms/excel/mail/sse â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®ä¸å­˜å‚¨å±‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MySQL   â”‚  Redis   â”‚   OSS    â”‚   å¯é€‰æ‰©å±•ä¸­é—´ä»¶              â”‚
â”‚ (ä¸»æ•°æ®)  â”‚  (ç¼“å­˜)  â”‚ (æ–‡ä»¶)   â”‚  (RocketMQ/MQTT/SnailJob)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”´ åç«¯ä¸‰å±‚æ¶æ„ï¼ˆæœ¬é¡¹ç›®æ ¸å¿ƒï¼‰

æœ¬é¡¹ç›®é‡‡ç”¨ **ä¸‰å±‚æ¶æ„**ï¼šController â†’ Service â†’ Mapper

**æ³¨æ„ï¼šæ²¡æœ‰ç‹¬ç«‹çš„ DAO å±‚ï¼Service å±‚ç›´æ¥è°ƒç”¨ Mapperã€‚**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Controller å±‚                              â”‚
â”‚     â€¢ æ¥æ”¶ HTTP è¯·æ±‚ã€å‚æ•°æ ¡éªŒã€è¿”å› R<T> å“åº”               â”‚
â”‚     â€¢ è·¯ç”±ï¼š/list, /{id}, /, /, /{ids}, /export            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Service å±‚                               â”‚
â”‚     â€¢ ä¸šåŠ¡é€»è¾‘å¤„ç†ã€äº‹åŠ¡ç®¡ç†ã€ç¼–æ’åè°ƒ                        â”‚
â”‚     â€¢ buildQueryWrapper() æŸ¥è¯¢æ¡ä»¶æ„å»º                       â”‚
â”‚     â€¢ ä½¿ç”¨ MyBatis-Plus LambdaQueryWrapper                   â”‚
â”‚     â€¢ ç›´æ¥æ³¨å…¥ Mapperï¼ˆæ—  DAO å±‚ï¼‰                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Mapper å±‚                                â”‚
â”‚     â€¢ extends BaseMapperPlus<Entity, Vo>                     â”‚
â”‚     â€¢ MyBatis-Plus ORM æ˜ å°„ã€SQL æ‰§è¡Œ                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ºä»€ä¹ˆæ˜¯ä¸‰å±‚è€Œéå››å±‚ï¼Ÿ**
- **æ²¡æœ‰ç‹¬ç«‹ DAO å±‚**ï¼šService å±‚ç›´æ¥æ³¨å…¥ Mapper
- `buildQueryWrapper()` æ–¹æ³•åœ¨ **Service å®ç°ç±»** ä¸­
- æ›´ç®€æ´ã€æ›´å°‘çš„æ ·æ¿ä»£ç 

---

## æ¶æ„è®¾è®¡åŸåˆ™

### 1. å•ä¸€èŒè´£

```java
// âœ… å¥½çš„è®¾è®¡ï¼šæ¯ä¸ªç±»åªè´Ÿè´£ä¸€ä»¶äº‹
public class OrderService {
    // åªå¤„ç†è®¢å•ä¸šåŠ¡
}

public class PaymentService {
    // åªå¤„ç†æ”¯ä»˜ä¸šåŠ¡
}

// âŒ ä¸å¥½çš„è®¾è®¡ï¼šä¸€ä¸ªç±»åšå¤ªå¤šäº‹
public class OrderService {
    // è®¢å• + æ”¯ä»˜ + ç‰©æµ + é€šçŸ¥...
}
```

### 2. å¼€é—­åŸåˆ™

```java
// âœ… å¥½çš„è®¾è®¡ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
public interface PaymentStrategy {
    void pay(Order order);
}

public class WechatPayment implements PaymentStrategy { }
public class AlipayPayment implements PaymentStrategy { }
// æ–°å¢æ”¯ä»˜æ–¹å¼åªéœ€æ–°å¢å®ç°ç±»

// âŒ ä¸å¥½çš„è®¾è®¡ï¼šæ–°å¢åŠŸèƒ½éœ€è¦ä¿®æ”¹åŸæœ‰ä»£ç 
public void pay(Order order, String type) {
    if ("wechat".equals(type)) {
        // å¾®ä¿¡æ”¯ä»˜
    } else if ("alipay".equals(type)) {
        // æ”¯ä»˜å®æ”¯ä»˜
    }
    // æ–°å¢æ”¯ä»˜æ–¹å¼éœ€è¦ä¿®æ”¹è¿™é‡Œ
}
```

### 3. ä¾èµ–å€’ç½®

```java
// âœ… å¥½çš„è®¾è®¡ï¼šä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°
@Service
public class OrderServiceImpl implements IOrderService {
    private final IPaymentService paymentService;  // ä¾èµ–æ¥å£
}

// âŒ ä¸å¥½çš„è®¾è®¡ï¼šç›´æ¥ä¾èµ–å…·ä½“å®ç°
@Service
public class OrderServiceImpl {
    private final WechatPaymentService paymentService;  // ä¾èµ–å…·ä½“ç±»
}
```

---

## æ¨¡å—åˆ’åˆ†ä¸è¡¨å‰ç¼€è§„èŒƒ

### æ ¸å¿ƒçº¦æŸï¼ˆå¿…é¡»éµå®ˆï¼‰

**åŒ…åå¿…é¡»æ˜¯ `org.dromara.*`**

### æ ‡å‡†æ¨¡å—ä¸è¡¨å‰ç¼€å¯¹åº”

| æ¨¡å— | ç›®å½•è·¯å¾„ | åŒ…è·¯å¾„ | è¡¨å‰ç¼€ | ç”¨é€” |
|------|---------|--------|--------|------|
| **ç³»ç»Ÿç®¡ç†** | `ruoyi-modules/ruoyi-system/` | `org.dromara.system` | `sys_` | ç³»ç»Ÿç®¡ç†åŠŸèƒ½ |
| **æ¼”ç¤ºæ¨¡å—** | `ruoyi-modules/ruoyi-demo/` | `org.dromara.demo` | `test_` | ç¤ºä¾‹ä¸æ¼”ç¤º |
| **å·¥ä½œæµ** | `ruoyi-modules/ruoyi-workflow/` | `org.dromara.workflow` | `flow_` | å·¥ä½œæµå¼•æ“ |

### ä¸šåŠ¡æ¨¡å—æ‰©å±•ï¼ˆæŒ‰ä¸šåŠ¡é¢†åŸŸï¼‰

åˆ›å»ºæ–°ä¸šåŠ¡æ¨¡å—æ—¶ï¼Œéµå¾ªä»¥ä¸‹è§„èŒƒï¼š

| ä¸šåŠ¡é¢†åŸŸ | æ–°æ¨¡å—å‘½å | åŒ…è·¯å¾„ | è¡¨å‰ç¼€ |
|---------|----------|--------|--------|
| **åŸºç¡€ä¸šåŠ¡** | `ruoyi-modules/ruoyi-xxx/` | `org.dromara.xxx` | `xxx_` |
| **å•†åŸä¸šåŠ¡** | `ruoyi-modules/ruoyi-mall/` | `org.dromara.mall` | `m_` |
| **ç‰©è”ç½‘** | `ruoyi-modules/ruoyi-iot/` | `org.dromara.iot` | `iot_` |

### å…³é”®è®¾è®¡åŸåˆ™

**1. è¡¨å‰ç¼€ä¸æ¨¡å—ä¸€ä¸€å¯¹åº”**
```
âœ… æ­£ç¡®ï¼šsys_user è¡¨ â†’ ruoyi-system æ¨¡å—
âŒ é”™è¯¯ï¼šsys_user è¡¨ â†’ ruoyi-demo æ¨¡å—ï¼ˆå‰ç¼€ä¸æ¨¡å—ä¸ç¬¦ï¼‰
```

**2. Java ç±»åä¸å¸¦å‰ç¼€**
```java
// âœ… æ­£ç¡®
@TableName("sys_user")  // è¡¨åå¸¦å‰ç¼€
public class SysUser extends TenantEntity { }  // ç±»åå¸¦ Sysï¼ˆç³»ç»Ÿæ¨¡å—ç‰¹ä¾‹ï¼‰

@TableName("test_demo")
public class TestDemo extends TenantEntity { }  // ç±»åä¸å¸¦ test å‰ç¼€
```

**3. æ‰€æœ‰ä¸šåŠ¡è¡¨ç»§æ‰¿ TenantEntity**
```java
// âœ… æ­£ç¡®ï¼šæ”¯æŒå¤šç§Ÿæˆ·
public class Order extends TenantEntity {
    // TenantEntity/BaseEntity æä¾›ï¼štenant_id, create_dept, create_by, create_time, update_by, update_time
    // å­ç±»éœ€è‡ªè¡Œå®šä¹‰ï¼š
    @TableId(value = "id")
    private Long id;                  // ä¸»é”®ï¼ˆé›ªèŠ±IDï¼Œå…¨å±€é…ç½®ï¼‰

    @TableLogic
    private Long delFlag;             // é€»è¾‘åˆ é™¤æ ‡å¿—
}
```

**4. ä¸»é”®ä½¿ç”¨é›ªèŠ± IDï¼ˆå…¨å±€é…ç½®ï¼‰**
```java
// âœ… æ­£ç¡®ï¼šä¾èµ–å…¨å±€é…ç½®ï¼ˆcommon-mybatis.yml ä¸­ idType: ASSIGN_IDï¼‰ï¼Œä¸éœ€è¦æ˜¾å¼æŒ‡å®š type
@TableId(value = "id")
private Long id;

// âŒ é”™è¯¯ï¼šæ˜¾å¼æŒ‡å®š typeï¼ˆå†—ä½™ï¼Œå…¨å±€å·²é…ç½®ï¼‰
@TableId(value = "id", type = IdType.ASSIGN_ID)

// âŒ é”™è¯¯ï¼šSQL ä¸­ä½¿ç”¨è‡ªå¢
id BIGINT AUTO_INCREMENT  -- ç¦æ­¢ï¼æœ¬é¡¹ç›®ç”¨é›ªèŠ±ID
```

### ğŸ”´ æ¨¡å—å†…éƒ¨ç»“æ„è§„èŒƒï¼ˆä¸‰å±‚æ¶æ„ï¼‰

ä»¥ `TestDemo` è¡¨ä¸ºä¾‹ï¼š

```
ruoyi-modules/ruoyi-demo/src/main/java/org/dromara/demo/
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ TestDemoController.java      # @RestController
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ ITestDemoService.java        # Service æ¥å£
â”‚   â””â”€â”€ impl/
â”‚       â””â”€â”€ TestDemoServiceImpl.java # Service å®ç°ï¼ˆåŒ…å« buildQueryWrapperï¼‰
â”œâ”€â”€ mapper/
â”‚   â””â”€â”€ TestDemoMapper.java          # extends BaseMapperPlus<TestDemo, TestDemoVo>
â””â”€â”€ domain/
    â”œâ”€â”€ TestDemo.java                # Entityï¼Œç»§æ‰¿ TenantEntity
    â”œâ”€â”€ bo/
    â”‚   â””â”€â”€ TestDemoBo.java          # ä¸šåŠ¡å¯¹è±¡ï¼ˆ@AutoMapperï¼‰
    â””â”€â”€ vo/
        â””â”€â”€ TestDemoVo.java          # è§†å›¾å¯¹è±¡
```

**Service å®ç°ç¤ºä¾‹ï¼ˆbuildQueryWrapper åœ¨ Service å±‚ï¼‰ï¼š**

```java
@Service
public class TestDemoServiceImpl implements ITestDemoService {

    private final TestDemoMapper baseMapper;  // ç›´æ¥æ³¨å…¥ Mapperï¼Œæ—  DAO å±‚

    /**
     * æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼ˆåœ¨ Service å±‚ï¼‰
     */
    private LambdaQueryWrapper<TestDemo> buildQueryWrapper(TestDemoBo bo) {
        Map<String, Object> params = bo.getParams();
        LambdaQueryWrapper<TestDemo> lqw = Wrappers.lambdaQuery();
        lqw.eq(bo.getDeptId() != null, TestDemo::getDeptId, bo.getDeptId());
        lqw.eq(bo.getUserId() != null, TestDemo::getUserId, bo.getUserId());
        lqw.like(StringUtils.isNotBlank(bo.getTestKey()), TestDemo::getTestKey, bo.getTestKey());
        lqw.between(params.get("beginCreateTime") != null && params.get("endCreateTime") != null,
            TestDemo::getCreateTime, params.get("beginCreateTime"), params.get("endCreateTime"));
        return lqw;
    }

    @Override
    public TableDataInfo<TestDemoVo> queryPageList(TestDemoBo bo, PageQuery pageQuery) {
        LambdaQueryWrapper<TestDemo> lqw = buildQueryWrapper(bo);
        Page<TestDemoVo> result = baseMapper.selectVoPage(pageQuery.build(), lqw);
        return TableDataInfo.build(result);
    }
}
```

### è¡¨è®¾è®¡è§„èŒƒ

#### å»ºè¡¨æ¨¡æ¿ï¼ˆMySQLï¼‰

```sql
CREATE TABLE xxx_table (
    -- ä¸»é”®ï¼ˆé›ªèŠ± IDï¼Œä¸ç”¨ AUTO_INCREMENTï¼‰
    id              BIGINT(20)    NOT NULL COMMENT 'ä¸»é”®ID',

    -- å¤šç§Ÿæˆ·å­—æ®µï¼ˆå¿…é¡»ï¼‰
    tenant_id       VARCHAR(20)   DEFAULT '000000' COMMENT 'ç§Ÿæˆ·ID',

    -- ä¸šåŠ¡å­—æ®µ
    xxx_name        VARCHAR(100)  NOT NULL COMMENT 'åç§°',
    status          CHAR(1)       DEFAULT '0' COMMENT 'çŠ¶æ€',
    remark          VARCHAR(500)  DEFAULT NULL COMMENT 'å¤‡æ³¨',

    -- å®¡è®¡å­—æ®µï¼ˆå¿…é¡»ï¼Œç»§æ‰¿è‡ª TenantEntityï¼‰
    create_dept     BIGINT(20)    DEFAULT NULL COMMENT 'åˆ›å»ºéƒ¨é—¨',
    create_by       BIGINT(20)    DEFAULT NULL COMMENT 'åˆ›å»ºäºº',
    create_time     DATETIME      DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    update_by       BIGINT(20)    DEFAULT NULL COMMENT 'æ›´æ–°äºº',
    update_time     DATETIME      DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',

    -- é€»è¾‘åˆ é™¤
    del_flag        CHAR(1)       DEFAULT '0' COMMENT 'åˆ é™¤æ ‡å¿—(0æ­£å¸¸ 1å·²åˆ é™¤)',

    PRIMARY KEY (id),
    INDEX idx_tenant_id (tenant_id),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='xxxè¡¨';
```

**å»ºè¡¨æ³¨æ„äº‹é¡¹ï¼š**
- è¡¨å‰ç¼€ä¸æ¨¡å—å¿…é¡»å¯¹åº”
- å¿…é¡»åŒ…å« `tenant_id`ï¼ˆæ”¯æŒå¤šç§Ÿæˆ·ï¼‰
- å¿…é¡»åŒ…å«å®¡è®¡å­—æ®µ
- å¿…é¡»åŒ…å«é€»è¾‘åˆ é™¤å­—æ®µï¼ˆ`del_flag`ï¼‰
- ä¸»é”®ä¸ä½¿ç”¨ `AUTO_INCREMENT`ï¼ˆä½¿ç”¨é›ªèŠ± IDï¼‰
- æ·»åŠ å¿…è¦çš„ç´¢å¼•

#### å¤šæ•°æ®åº“æ”¯æŒ

| æ•°æ®åº“ | SQL æ–‡ä»¶ä½ç½® |
|--------|------------|
| MySQL | `script/sql/ry_vue_5.X.sql` |
| Oracle | `script/sql/oracle/` |
| PostgreSQL | `script/sql/postgres/` |
| SQL Server | `script/sql/sqlserver/` |

---

## å®æˆ˜æ¶æ„æ¡ˆä¾‹

### æ¡ˆä¾‹ 1ï¼šè®¢å•ç³»ç»Ÿæ¶æ„

**éœ€æ±‚ï¼š** ç”µå•†è®¢å•åˆ›å»ºã€æ”¯ä»˜ã€å‘è´§

**æ¨¡å—åˆ’åˆ†ï¼š**
```
ruoyi-modules/ruoyi-mall/
â”œâ”€â”€ order/              # è®¢å•æ¨¡å—ï¼ˆm_orderï¼‰
â”œâ”€â”€ goods/              # å•†å“æ¨¡å—ï¼ˆm_goodsï¼‰
â””â”€â”€ payment/            # æ”¯ä»˜æ¨¡å—ï¼ˆm_paymentï¼‰
```

**åŒ…è·¯å¾„è§„èŒƒï¼š**
```
org.dromara.mall.order.controller.OrderController
org.dromara.mall.order.service.IOrderService
org.dromara.mall.order.service.impl.OrderServiceImpl
org.dromara.mall.order.mapper.OrderMapper
org.dromara.mall.order.domain.Order
```

**æŠ€æœ¯é€‰å‹ï¼š**
```
â”œâ”€â”€ æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ MySQLï¼ˆè®¢å•ä¸»æ•°æ®ï¼‰
â”‚   â”œâ”€â”€ Redisï¼ˆåº“å­˜ç¼“å­˜ã€åˆ†å¸ƒå¼é”ï¼‰
â”‚   â””â”€â”€ OSSï¼ˆå‘ç¥¨ã€ç‰©æµå•å›¾ç‰‡ï¼‰
â”œâ”€â”€ æ¶ˆæ¯é€šä¿¡
â”‚   â”œâ”€â”€ WebSocketï¼ˆè®¢å•çŠ¶æ€å®æ—¶æ¨é€ï¼‰
â”‚   â””â”€â”€ Redis Streamsï¼ˆè®¢å•å¼‚æ­¥å¤„ç†ï¼‰
â””â”€â”€ å®šæ—¶ä»»åŠ¡
    â”œâ”€â”€ SnailJobï¼ˆå¯¹è´¦ä»»åŠ¡ - åˆ†å¸ƒå¼ï¼‰
    â””â”€â”€ @Scheduledï¼ˆè®¢å•è¶…æ—¶å–æ¶ˆ - ç®€å•ï¼‰
```

### æ¡ˆä¾‹ 2ï¼šIoT è®¾å¤‡ç›‘æ§ç³»ç»Ÿ

**éœ€æ±‚ï¼š** è®¾å¤‡æ•°æ®é‡‡é›†ã€å®æ—¶ç›‘æ§ã€å‘Šè­¦æ¨é€

**æ¨¡å—åˆ’åˆ†ï¼š**
```
org.dromara.iot.device.*
org.dromara.iot.data.*
org.dromara.iot.alert.*
```

**æŠ€æœ¯é€‰å‹ï¼š**
```
â”œâ”€â”€ è®¾å¤‡é€šä¿¡
â”‚   â””â”€â”€ MQTTï¼ˆç‰©è”ç½‘åè®®ï¼Œéœ€è‡ªè¡Œé›†æˆï¼‰
â”œâ”€â”€ æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ MySQLï¼ˆè®¾å¤‡å…ƒæ•°æ®ã€å‘Šè­¦è®°å½•ï¼‰
â”‚   â””â”€â”€ Redisï¼ˆè®¾å¤‡åœ¨çº¿çŠ¶æ€ã€å®æ—¶æ•°æ®ï¼‰
â”œâ”€â”€ å®æ—¶æ¨é€
â”‚   â””â”€â”€ WebSocketï¼ˆå‘Šè­¦æ¨é€ï¼‰
â””â”€â”€ å®šæ—¶ä»»åŠ¡
    â””â”€â”€ @Scheduledï¼ˆè®¾å¤‡ç¦»çº¿æ£€æµ‹ï¼‰
```

---

## æŠ€æœ¯é€‰å‹å†³ç­–æŒ‡å—

### åœºæ™¯ 1ï¼šéœ€è¦æ¶ˆæ¯é˜Ÿåˆ—å—ï¼Ÿ

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
|------|---------|------|
| è®¢å•åˆ›å»ºåå‘é€é€šçŸ¥ | âŒ ä¸éœ€è¦ï¼ŒåŒæ­¥è°ƒç”¨ | ç®€å•åœºæ™¯ |
| è®¢å•æ”¯ä»˜æˆåŠŸåæ›´æ–°åº“å­˜ | âœ… Redis Streams | è§£è€¦ |
| ç§’æ€æ´»åŠ¨å‰Šå³°å¡«è°· | âœ… RocketMQ | é«˜å¹¶å‘ |

### åœºæ™¯ 2ï¼šå®šæ—¶ä»»åŠ¡å¦‚ä½•é€‰æ‹©ï¼Ÿ

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ |
|------|---------|
| è®¢å•è¶…æ—¶è‡ªåŠ¨å–æ¶ˆï¼ˆå•æœºï¼‰ | `@Scheduled` |
| æ¯æ—¥æ•°æ®æ±‡æ€»ï¼ˆåˆ†å¸ƒå¼ï¼‰ | SnailJob |
| å®æ—¶ç›‘æ§è®¾å¤‡çŠ¶æ€ | `@Scheduled` |

### åœºæ™¯ 3ï¼šå®æ—¶é€šä¿¡æ–¹æ¡ˆ

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ |
|------|---------|
| è®¢å•çŠ¶æ€æ¨é€ | WebSocket |
| ç³»ç»Ÿé€šçŸ¥æ¨é€ | SSE |
| IoT è®¾å¤‡é€šä¿¡ | MQTTï¼ˆè‡ªè¡Œé›†æˆï¼‰ |

---

## å¸¸è§æ¶æ„æ¨¡å¼å¯¹æ¯”

| æ¶æ„æ¨¡å¼ | é€‚ç”¨åœºæ™¯ | æœ¬é¡¹ç›®é‡‡ç”¨ |
|---------|---------|-----------|
| **åˆ†å±‚æ¶æ„** | ä¸­å°å‹é¡¹ç›® | âœ… æ˜¯ï¼ˆä¸‰å±‚æ¶æ„ï¼‰ |
| **DDD** | å¤æ‚ä¸šåŠ¡é¢†åŸŸ | âŒ å¦ |
| **å¾®æœåŠ¡** | å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿ | âš ï¸ å¯é€‰ |

### æœ¬é¡¹ç›®æ¨èæ¶æ„è·¯å¾„

```
é˜¶æ®µ 1ï¼šå•ä½“åº”ç”¨ï¼ˆå½“å‰ï¼‰
â”œâ”€â”€ ä¸‰å±‚æ¶æ„ï¼šController â†’ Service â†’ Mapper
â”œâ”€â”€ å¤šç§Ÿæˆ·æ”¯æŒ
â”œâ”€â”€ æ¨¡å—åŒ–è®¾è®¡
â””â”€â”€ é€‚åˆï¼š0-10ä¸‡ç”¨æˆ·

é˜¶æ®µ 2ï¼šå‚ç›´æ‹†åˆ†ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ æŒ‰æ¨¡å—æ‹†åˆ†å¾®æœåŠ¡
â”œâ”€â”€ å¼•å…¥ Spring Cloud Gateway
â””â”€â”€ é€‚åˆï¼š10ä¸‡-100ä¸‡ç”¨æˆ·
```

---

## æ¶æ„è®¾è®¡å¿«é€Ÿæ£€æŸ¥æ¸…å•

### âœ… æ–°æ¨¡å—è®¾è®¡æ£€æŸ¥

- [ ] **åŒ…è·¯å¾„æ­£ç¡®**ï¼š`org.dromara.{æ¨¡å—å}`
- [ ] **è¡¨å‰ç¼€åŒ¹é…**ï¼š`sys_` / `test_` / `flow_` / è‡ªå®šä¹‰
- [ ] **è¡¨è®¾è®¡è§„èŒƒ**ï¼š
  - [ ] ä¸»é”®ä½¿ç”¨é›ªèŠ± ID
  - [ ] åŒ…å« `tenant_id` å­—æ®µ
  - [ ] åŒ…å«å®¡è®¡å­—æ®µ
  - [ ] åŒ…å«é€»è¾‘åˆ é™¤å­—æ®µ `del_flag`
- [ ] **ä¸‰å±‚æ¶æ„å®Œæ•´**ï¼š
  - [ ] Controller
  - [ ] Serviceï¼ˆåŒ…å« `buildQueryWrapper()` æ–¹æ³•ï¼‰
  - [ ] Mapperï¼ˆ`extends BaseMapperPlus<Entity, Vo>`ï¼‰
- [ ] **å¯¹è±¡è½¬æ¢**ï¼šä½¿ç”¨ `MapstructUtils.convert()`
- [ ] **å¼‚å¸¸å¤„ç†**ï¼šä½¿ç”¨ `ServiceException`
- [ ] **æƒé™æ³¨è§£**ï¼š`@SaCheckPermission("{æ¨¡å—}:{å®ä½“}:{æ“ä½œ}")`

### âœ… æŠ€æœ¯é€‰å‹æ£€æŸ¥

- [ ] **ç¼“å­˜éœ€æ±‚**ï¼šä¼˜å…ˆé€‰æ‹© Redis + Redisson
- [ ] **å®æ—¶é€šä¿¡**ï¼šä¼˜å…ˆé€‰æ‹© WebSocket
- [ ] **å®šæ—¶ä»»åŠ¡**ï¼šç®€å•åœºæ™¯ç”¨ `@Scheduled`ï¼Œå¤æ‚åœºæ™¯ç”¨ SnailJob
- [ ] **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šä¼˜å…ˆ Redis Streams
- [ ] **æ•°æ®å¯¼å‡º**ï¼šä½¿ç”¨ FastExcel
- [ ] **æ–‡ä»¶å­˜å‚¨**ï¼šä½¿ç”¨ AWS S3 SDK

---

## å¤šé¡¹ç›®é€‚é…è¯´æ˜

### ä¸åŒé¡¹ç›®æ¶æ„å¯¹æ¯”

| é¡¹ç›®ç‰¹å¾ | RuoYi-Vue-Plus | leniu-tengyun-core |
|---------|----------------|-------------------|
| **åŒ…åå‰ç¼€** | `org.dromara.*` | `net.xnzn.core.*` |
| **JDK ç‰ˆæœ¬** | 17 | 21 |
| **è¯·æ±‚å°è£…** | ç›´æ¥ä½¿ç”¨ BO | `LeRequest<T>` |
| **å“åº”å°è£…** | `R<T>`, `TableDataInfo<T>` | `Page<T>`, `void` |
| **å¼‚å¸¸ç±»** | `ServiceException` | `LeException` |
| **å›½é™…åŒ–** | `MessageUtils.message()` | `I18n.getMessage()` |
| **æƒé™æ³¨è§£** | `@SaCheckPermission` | `@RequiresAuthentication` |
| **åˆ†é¡µ** | `PageQuery`, `TableDataInfo` | `PageDTO`, `Page<VO>` |

### é€šç”¨æœ€ä½³å®è·µ

æ— è®ºä½¿ç”¨å“ªç§é¡¹ç›®æ¶æ„ï¼Œä»¥ä¸‹åŸåˆ™éƒ½æ˜¯é€šç”¨çš„ï¼š

1. **ä¸‰å±‚æ¶æ„**ï¼šController â†’ Service â†’ Mapperï¼Œæ— ç‹¬ç«‹ DAO å±‚
2. **åˆ†ç»„æ ¡éªŒ**ï¼šä½¿ç”¨ Validation Groups åŒºåˆ†æ–°å¢/ä¿®æ”¹åœºæ™¯
3. **å›½é™…åŒ–**ï¼šæ‰€æœ‰é”™è¯¯æ¶ˆæ¯ä½¿ç”¨ i18nï¼Œä¸ç¡¬ç¼–ç 
4. **æ—¥å¿—è§„èŒƒ**ï¼šå…³é”®æ“ä½œè®°å½•æ—¥å¿—ï¼Œä½¿ç”¨å ä½ç¬¦
5. **å¼‚å¸¸å¤„ç†**ï¼šä½¿ç”¨ç»Ÿä¸€çš„ä¸šåŠ¡å¼‚å¸¸ç±»
6. **åˆ†å¸ƒå¼é”**ï¼šæ•æ„Ÿæ“ä½œä½¿ç”¨ Redisson åˆ†å¸ƒå¼é”

---

## leniu-tengyun-core æ¶æ„è¯¦è§£

### é¡¹ç›®ç»“æ„

```
leniu-tengyun-core/
â”œâ”€â”€ src/main/java/net/xnzn/core/
â”‚   â”œâ”€â”€ api/                    # API æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ service/                # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ domain/                 # å®ä½“ç±»
â”‚   â”‚   â”œâ”€â”€ entity/            # æ•°æ®åº“å®ä½“
â”‚   â”‚   â”œâ”€â”€ dto/               # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â””â”€â”€ vo/                # è§†å›¾å¯¹è±¡
â”‚   â”œâ”€â”€ mapper/                 # MyBatis Mapper
â”‚   â”œâ”€â”€ common/                 # å…¬å…±æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ exception/         # å¼‚å¸¸å¤„ç†
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ config/            # é…ç½®ç±»
â”‚   â””â”€â”€ Auth/                   # è®¤è¯ç›¸å…³
â””â”€â”€ src/main/resources/
    â””â”€â”€ application.yml
```

### JDK 21 ç‰¹æ€§åˆ©ç”¨

```java
// Record ç±»ï¼ˆä¸å¯å˜æ•°æ®è½½ä½“ï¼‰
public record UserDTO(
    Long id,
    String name,
    String email
) {}

// Sealed ç±»ï¼ˆé™å®šç»§æ‰¿ï¼‰
public sealed interface Result permits Success, Failure {
    record Success<T>(T data) implements Result {}
    record Failure(String message) implements Result {}
}

// Pattern Matching
if (obj instanceof String s && s.length() > 5) {
    System.out.println(s.toUpperCase());
}

// Switch è¡¨è¾¾å¼
String result = switch (status) {
    case 0 -> "å¾…å¤„ç†";
    case 1 -> "å¤„ç†ä¸­";
    case 2 -> "å·²å®Œæˆ";
    default -> "æœªçŸ¥";
};
```

### è¯·æ±‚å“åº”å°è£…

```java
// LeRequest è¯·æ±‚å°è£…
@Data
public class LeRequest<T> {
    @ApiModelProperty(value = "è¯·æ±‚å†…å®¹", required = true)
    @NotNull(message = "è¯·æ±‚å†…å®¹ä¸èƒ½ä¸ºç©º")
    private T content;
}

// PageDTO åˆ†é¡µå‚æ•°
@Data
public class PageDTO {
    @ApiModelProperty(value = "å½“å‰é¡µ", required = true)
    @NotNull(message = "å½“å‰é¡µä¸èƒ½ä¸ºç©º")
    @Min(value = 1, message = "é¡µç å¿…é¡»å¤§äº0")
    private Integer pageNum;

    @ApiModelProperty(value = "æ¯é¡µæ¡æ•°", required = true)
    @NotNull(message = "æ¯é¡µæ¡æ•°ä¸èƒ½ä¸ºç©º")
    @Min(value = 1, message = "æ¯é¡µæ¡æ•°å¿…é¡»å¤§äº0")
    @Max(value = 1000, message = "æ¯é¡µæ¡æ•°ä¸èƒ½è¶…è¿‡1000")
    private Integer pageSize;
}

// PageVO åˆ†é¡µå“åº”
@Data
public class PageVO<T> {
    private List<T> records;
    private Long total;
    private Integer pageNum;
    private Integer pageSize;

    public static <T> PageVO<T> of(Page<T> page) {
        PageVO<T> vo = new PageVO<>();
        vo.setRecords(page.getRecords());
        vo.setTotal(page.getTotal());
        vo.setPageNum(page.getCurrent());
        vo.setPageSize(page.getSize());
        return vo;
    }
}
```

---

## å¸¸è§é—®é¢˜ FAQ

### Q1: ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨ RocketMQï¼Ÿ

**A:** æœ¬æ¡†æ¶æœªå†…ç½® RocketMQï¼Œåªåœ¨é«˜å¹¶å‘å‰Šå³°ã€åˆ†å¸ƒå¼äº‹åŠ¡ç­‰åœºæ™¯è€ƒè™‘ä½¿ç”¨ã€‚
- ç®€å•åœºæ™¯ â†’ Redis Streamsï¼ˆå·²é›†æˆï¼‰
- å¼‚æ­¥ä»»åŠ¡ â†’ SnailJobï¼ˆå·²é›†æˆï¼‰
- é«˜åå â†’ RocketMQï¼ˆè‡ªè¡Œé›†æˆï¼‰

### Q2: æœ¬é¡¹ç›®ä¸ºä»€ä¹ˆæ²¡æœ‰ DAO å±‚ï¼Ÿ

**A:** æœ¬é¡¹ç›®é‡‡ç”¨ä¸‰å±‚æ¶æ„ï¼š
- Service å±‚ç›´æ¥æ³¨å…¥ Mapper
- `buildQueryWrapper()` æ–¹æ³•åœ¨ Service å®ç°ç±»ä¸­
- æ›´ç®€æ´ã€æ›´å°‘çš„æ ·æ¿ä»£ç 
- é¿å…è¿‡åº¦åˆ†å±‚

### Q3: è¡¨å‰ç¼€ä¸æ¨¡å—å¦‚ä½•å¯¹åº”ï¼Ÿ

**A:** ä¸¥æ ¼å¯¹åº”è§„åˆ™ï¼š
| æ¨¡å— | è¡¨å‰ç¼€ |
|------|--------|
| system | `sys_` |
| demo | `test_` |
| workflow | `flow_` |
| è‡ªå®šä¹‰ | è‡ªå®šä¹‰å‰ç¼€ |

### Q4: ä»€ä¹ˆæ—¶å€™ç”¨ SnailJob è€Œé @Scheduledï¼Ÿ

**A:** é€‰æ‹©æ ‡å‡†ï¼š
- **@Scheduled**ï¼šå•æœºã€ç®€å•å®šæ—¶ä»»åŠ¡
- **SnailJob**ï¼šåˆ†å¸ƒå¼ã€éœ€è¦å¤±è´¥é‡è¯•ã€å·¥ä½œæµç¼–æ’

### Q5: æ–°å¢æ¨¡å—éœ€è¦åˆ›å»ºå“ªäº›æ–‡ä»¶ï¼Ÿ

**A:** æœ€å°é›†åˆï¼ˆä»¥ `XxxDemo` è¡¨ä¸ºä¾‹ï¼‰ï¼š

```
ruoyi-modules/ruoyi-xxx/src/main/java/org/dromara/xxx/
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ XxxDemoController.java      # @RestController
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ IXxxDemoService.java        # æ¥å£
â”‚   â””â”€â”€ impl/
â”‚       â””â”€â”€ XxxDemoServiceImpl.java # å®ç°ï¼ˆå« buildQueryWrapperï¼‰
â”œâ”€â”€ mapper/
â”‚   â””â”€â”€ XxxDemoMapper.java          # extends BaseMapperPlus
â””â”€â”€ domain/
    â”œâ”€â”€ XxxDemo.java                # extends TenantEntity
    â”œâ”€â”€ bo/
    â”‚   â””â”€â”€ XxxDemoBo.java          # @AutoMapper
    â””â”€â”€ vo/
        â””â”€â”€ XxxDemoVo.java          # è§†å›¾å¯¹è±¡
```

**å…³é”®æ¸…å•ï¼š**
- [ ] åŒ…åï¼š`org.dromara.xxx.*`
- [ ] Entity ç»§æ‰¿ï¼š`TenantEntity`
- [ ] Service ä¸ç»§æ‰¿åŸºç±»ï¼Œç›´æ¥æ³¨å…¥ Mapper
- [ ] `buildQueryWrapper()` åœ¨ Service å®ç°ç±»ä¸­
- [ ] å¯¹è±¡è½¬æ¢ä½¿ç”¨ `MapstructUtils.convert()`
