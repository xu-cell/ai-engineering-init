# å·¥å…·ç±»ä½¿ç”¨æŒ‡å—

> **é‡è¦æç¤º**: æœ¬é¡¹ç›®æ˜¯ RuoYi-Vue-Plus **çº¯åç«¯é¡¹ç›®**ï¼Œé‡‡ç”¨**ä¸‰å±‚æ¶æ„**ã€‚
> ä¼˜å…ˆä½¿ç”¨é¡¹ç›®å·¥å…·ç±»ï¼Œç¦æ­¢é‡å¤é€ è½®å­ã€‚

æœ€åæ›´æ–°: 2026-02-09

---

## ğŸš¨ æ ¸å¿ƒè§„èŒƒ

### ç¦æ­¢äº‹é¡¹

```java
// âŒ ç¦æ­¢ä½¿ç”¨ BeanUtilsï¼ˆå¿…é¡»ä½¿ç”¨ MapstructUtilsï¼‰
BeanUtils.copyProperties(source, target);  // ç¦æ­¢ï¼

// âŒ ç¦æ­¢ä½¿ç”¨ Map ä¼ é€’ä¸šåŠ¡æ•°æ®
public Map<String, Object> getXxx() { ... }  // ç¦æ­¢ï¼å¿…é¡»ç”¨ VO

// âŒ ç¦æ­¢ä½¿ç”¨å®Œæ•´ç±»å‹å¼•ç”¨
public org.dromara.common.core.domain.R<XxxVo> getXxx()  // ç¦æ­¢ï¼
// âœ… æ­£ç¡®ï¼šå…ˆ importï¼Œå†ä½¿ç”¨çŸ­ç±»å
import org.dromara.common.core.domain.R;
public R<XxxVo> getXxx()
```

### å·¥å…·ç±»ä¼˜å…ˆçº§

```
é¡¹ç›®å·¥å…·ç±» > Hutool > Apache Commons > è‡ªå·±å®ç°
```

---

## ğŸ“‹ å¿«é€Ÿç´¢å¼•

| åŠŸèƒ½ | å·¥å…·ç±» | åŒ…è·¯å¾„ | å¸¸ç”¨æ–¹æ³• |
|------|--------|--------|---------|
| **å¯¹è±¡è½¬æ¢** | `MapstructUtils` | `o.d.common.core.utils` | `convert()` |
| å­—ç¬¦ä¸² | `StringUtils` | `o.d.common.core.utils` | `isBlank()`, `format()` |
| é›†åˆ/æµ | `StreamUtils` | `o.d.common.core.utils` | `filter()`, `toList()`, `toMap()` |
| æ ‘ç»“æ„ | `TreeBuildUtils` | `o.d.common.core.utils` | `build()` |
| æ—¥æœŸæ—¶é—´ | `DateUtils` | `o.d.common.core.utils` | `getTime()`, `formatDateTime()` |
| Redisç¼“å­˜ | `RedisUtils` | `o.d.common.redis.utils` | `setCacheObject()`, `getCacheObject()` |
| Excelå¯¼å‡º | `ExcelUtil` | `o.d.common.excel.utils` | `exportExcel()` |
| JSON | `JsonUtils` | `o.d.common.json.utils` | `toJsonString()`, `parseObject()` |
| ç™»å½•ç”¨æˆ· | `LoginHelper` | `o.d.common.satoken.utils` | `getUserId()`, `getUsername()` |
| ä¸šåŠ¡å¼‚å¸¸ | `ServiceException` | `o.d.common.core.exception` | `throw new ServiceException()` |
| Springå®¹å™¨ | `SpringUtils` | `o.d.common.core.utils` | `getBean()` |
| Hutoolé›†åˆ | `CollUtil` | `cn.hutool.core.collection` | `isEmpty()`, `newArrayList()` |
| Hutoolå¯¹è±¡ | `ObjectUtil` | `cn.hutool.core.util` | `isNull()`, `isEmpty()` |
| IDç”Ÿæˆ | `IdUtil` | `cn.hutool.core.util` | `getSnowflakeNextId()` |

> **åŒ…è·¯å¾„è¯´æ˜**: `o.d` = `org.dromara`

---

## 1. å¯¹è±¡è½¬æ¢ - MapstructUtilsï¼ˆå¿…é¡»ä½¿ç”¨ï¼ï¼‰

> âš ï¸ **å¼ºåˆ¶è§„èŒƒ**: ç¦æ­¢ä½¿ç”¨ `BeanUtils.copyProperties()`ï¼Œå¿…é¡»ä½¿ç”¨ `MapstructUtils.convert()`

```java
import org.dromara.common.core.utils.MapstructUtils;

// âœ… å•ä¸ªå¯¹è±¡è½¬æ¢
XxxVo vo = MapstructUtils.convert(entity, XxxVo.class);
Xxx entity = MapstructUtils.convert(bo, Xxx.class);

// âœ… é›†åˆè½¬æ¢
List<XxxVo> voList = MapstructUtils.convert(entityList, XxxVo.class);

// âŒ ç¦æ­¢ä½¿ç”¨ BeanUtils
// BeanUtils.copyProperties(source, target);  // ç¦æ­¢ï¼
```

**é…åˆ @AutoMapper æ³¨è§£**:

```java
// åœ¨ BO ç±»ä¸Šå£°æ˜æ˜ å°„å…³ç³»ï¼ˆå•æ•°ï¼Œä¸æ˜¯ @AutoMappersï¼‰
@AutoMapper(target = Xxx.class, reverseConvertGenerate = false)
public class XxxBo extends BaseEntity {
    // ...
}

// åœ¨ VO ç±»ä¸Šå£°æ˜æ˜ å°„å…³ç³»
@AutoMapper(target = Xxx.class)
public class XxxVo implements Serializable {
    // ...
}
```

---

## 2. å­—ç¬¦ä¸²æ“ä½œ - StringUtils

```java
import org.dromara.common.core.utils.StringUtils;

// åˆ¤ç©ºï¼ˆæ¨èï¼‰
StringUtils.isBlank(str);      // null / "" / ç©ºç™½ éƒ½è¿”å› true
StringUtils.isNotBlank(str);
StringUtils.isEmpty(str);      // null / "" è¿”å› true
StringUtils.isNotEmpty(str);

// æ ¼å¼åŒ–ï¼ˆå ä½ç¬¦ {}ï¼‰
StringUtils.format("ç”¨æˆ· {} ä¸å­˜åœ¨", userId);
// è¾“å‡º: "ç”¨æˆ· 123 ä¸å­˜åœ¨"

// å­—ç¬¦ä¸²åˆ†å‰²
List<String> list = StringUtils.splitList("1,2,3");           // ["1", "2", "3"]
List<Long> ids = StringUtils.splitTo("1,2,3", Convert::toLong); // è½¬æ¢ç±»å‹

// é©¼å³°è½¬æ¢
StringUtils.toCamelCase("user_name");           // "userName"
StringUtils.toUnderScoreCase("userName");       // "user_name"
```

---

## 3. é›†åˆä¸æµæ“ä½œ - StreamUtils

```java
import org.dromara.common.core.utils.StreamUtils;

// è¿‡æ»¤
List<User> activeUsers = StreamUtils.filter(users, u -> "1".equals(u.getStatus()));

// æå–å±æ€§ä¸º List
List<Long> ids = StreamUtils.toList(users, User::getId);

// æå–å±æ€§ä¸º Set
Set<Long> deptIds = StreamUtils.toSet(users, User::getDeptId);

// è½¬ä¸º Mapï¼ˆvalue æ˜¯å…ƒç´ æœ¬èº«ï¼‰
Map<Long, User> userMap = StreamUtils.toIdentityMap(users, User::getId);

// è½¬ä¸º Mapï¼ˆè‡ªå®šä¹‰ key å’Œ valueï¼‰
Map<Long, String> nameMap = StreamUtils.toMap(users, User::getId, User::getName);

// åˆ†ç»„
Map<Long, List<User>> deptUserMap = StreamUtils.groupByKey(users, User::getDeptId);

// æ‹¼æ¥å­—ç¬¦ä¸²
String names = StreamUtils.join(users, User::getName);           // "å¼ ä¸‰,æå››,ç‹äº”"
String names = StreamUtils.join(users, User::getName, "|");      // "å¼ ä¸‰|æå››|ç‹äº”"
```

---

## 4. æ ‘ç»“æ„æ„å»º - TreeBuildUtils

```java
import org.dromara.common.core.utils.TreeBuildUtils;
import cn.hutool.core.lang.tree.Tree;

// æ„å»ºæ ‘ï¼ˆè‡ªåŠ¨æ£€æµ‹æ ¹èŠ‚ç‚¹ï¼‰
List<Tree<Long>> tree = TreeBuildUtils.build(list, (node, item) -> {
    node.setId(item.getId());
    node.setParentId(item.getParentId());
    node.setName(item.getName());
    node.setWeight(item.getOrderNum());  // æ’åº
    // æ‰©å±•å±æ€§
    node.putExtra("icon", item.getIcon());
    node.putExtra("path", item.getPath());
});

// æŒ‡å®šæ ¹èŠ‚ç‚¹ ID
List<Tree<Long>> tree = TreeBuildUtils.build(list, 0L, (node, item) -> {
    // ...
});
```

---

## 5. æ—¥æœŸæ—¶é—´ - DateUtils

```java
import org.dromara.common.core.utils.DateUtils;

// è·å–å½“å‰æ—¶é—´
Date now = DateUtils.getNowDate();
String date = DateUtils.getDate();      // "2026-01-24"
String time = DateUtils.getTime();      // "2026-01-24 15:30:00"

// æ ¼å¼åŒ–
DateUtils.formatDate(date);             // "2026-01-24"
DateUtils.formatDateTime(date);         // "2026-01-24 15:30:00"

// è§£æ
Date date = DateUtils.parseDate("2026-01-24");

// è·¯å¾„æ ¼å¼
DateUtils.datePath();  // "2026/01/24"
```

---

## 6. Redis ç¼“å­˜ - RedisUtils

```java
import org.dromara.common.redis.utils.RedisUtils;
import java.time.Duration;

// åŸºæœ¬æ“ä½œ
RedisUtils.setCacheObject("key", value);                        // æ°¸ä¹…
RedisUtils.setCacheObject("key", value, Duration.ofMinutes(30)); // 30åˆ†é’Ÿè¿‡æœŸ
RedisUtils.getCacheObject("key");
RedisUtils.deleteObject("key");
RedisUtils.hasKey("key");

// List æ“ä½œ
RedisUtils.setCacheList("listKey", dataList);
List<T> list = RedisUtils.getCacheList("listKey");

// Map/Hash æ“ä½œ
RedisUtils.setCacheMap("mapKey", dataMap);
RedisUtils.setCacheMapValue("mapKey", "field", value);
T value = RedisUtils.getCacheMapValue("mapKey", "field");

// åŸå­æ“ä½œ
RedisUtils.setAtomicValue("counter", 0);
long val = RedisUtils.incrAtomicValue("counter");  // +1
long val = RedisUtils.decrAtomicValue("counter");  // -1
```

---

## 7. ç™»å½•ç”¨æˆ· - LoginHelper

```java
import org.dromara.common.satoken.utils.LoginHelper;

// è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯
Long userId = LoginHelper.getUserId();
String username = LoginHelper.getUsername();
Long deptId = LoginHelper.getDeptId();
String tenantId = LoginHelper.getTenantId();
LoginUser loginUser = LoginHelper.getLoginUser();

// åˆ¤æ–­ç™»å½•çŠ¶æ€
boolean isLogin = LoginHelper.isLogin();

// åˆ¤æ–­æ˜¯å¦è¶…çº§ç®¡ç†å‘˜
boolean isSuperAdmin = LoginHelper.isSuperAdmin();
```

---

## 8. ä¸šåŠ¡å¼‚å¸¸ - ServiceException

```java
import org.dromara.common.core.exception.ServiceException;

// æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸
throw new ServiceException("ç”¨æˆ·ä¸å­˜åœ¨");
throw new ServiceException("ç”¨æˆ· {} ä¸å­˜åœ¨", userId);

// æ¡ä»¶åˆ¤æ–­
if (user == null) {
    throw new ServiceException("ç”¨æˆ·ä¸å­˜åœ¨");
}
```

---

## 9. Excel å¯¼å‡º - ExcelUtil

```java
import org.dromara.common.excel.utils.ExcelUtil;

// Controller ä¸­å¯¼å‡º
@PostMapping("/export")
public void export(XxxBo bo, HttpServletResponse response) {
    List<XxxVo> list = xxxService.queryList(bo);
    ExcelUtil.exportExcel(list, "æ•°æ®å¯¼å‡º", XxxVo.class, response);
}
```

**VO ç±» Excel æ³¨è§£**:

```java
@Data
@ExcelIgnoreUnannotated
public class XxxVo implements Serializable {

    @ExcelProperty(value = "ID")
    private Long id;

    @ExcelProperty(value = "åç§°")
    private String name;

    @ExcelProperty(value = "çŠ¶æ€")
    @ExcelDictFormat(dictType = "sys_normal_disable")
    private String status;

    @ExcelProperty(value = "åˆ›å»ºæ—¶é—´")
    private Date createTime;
}
```

---

## 10. JSON æ“ä½œ - JsonUtils

```java
import org.dromara.common.json.utils.JsonUtils;

// å¯¹è±¡è½¬ JSON
String json = JsonUtils.toJsonString(obj);

// JSON è½¬å¯¹è±¡
User user = JsonUtils.parseObject(json, User.class);

// JSON è½¬ List
List<User> list = JsonUtils.parseArray(json, User.class);

// JSON è½¬ Map
Map<String, Object> map = JsonUtils.parseMap(json);
```

---

## 11. Hutool å¸¸ç”¨å·¥å…·

```java
import cn.hutool.core.collection.CollUtil;
import cn.hutool.core.util.ObjectUtil;
import cn.hutool.core.util.IdUtil;

// é›†åˆåˆ¤ç©º
CollUtil.isEmpty(list);
CollUtil.isNotEmpty(list);
CollUtil.newArrayList(1, 2, 3);

// å¯¹è±¡åˆ¤ç©º
ObjectUtil.isNull(obj);
ObjectUtil.isNotNull(obj);
ObjectUtil.isEmpty(obj);      // null / ç©ºå­—ç¬¦ä¸² / ç©ºé›†åˆ
ObjectUtil.defaultIfNull(obj, defaultValue);

// ID ç”Ÿæˆ
long snowflakeId = IdUtil.getSnowflakeNextId();  // é›ªèŠ±IDï¼ˆæ¨èï¼‰
String uuid = IdUtil.simpleUUID();    // æ— æ¨ªçº¿ UUID
```

---

## 12. å‚æ•°æ ¡éªŒ - ValidatorUtils

```java
import org.dromara.common.core.utils.ValidatorUtils;
import org.dromara.common.core.validate.AddGroup;
import org.dromara.common.core.validate.EditGroup;

// Controller å±‚ä½¿ç”¨ @Validatedï¼ˆæ¨èï¼‰
@PostMapping
public R<Void> add(@Validated(AddGroup.class) @RequestBody XxxBo bo) {
    // ...
}

@PutMapping
public R<Void> edit(@Validated(EditGroup.class) @RequestBody XxxBo bo) {
    // ...
}
```

**BO ç±»æ ¡éªŒæ³¨è§£**:

```java
public class XxxBo extends BaseEntity {

    @NotNull(message = "IDä¸èƒ½ä¸ºç©º", groups = { EditGroup.class })
    private Long id;

    @NotBlank(message = "åç§°ä¸èƒ½ä¸ºç©º", groups = { AddGroup.class, EditGroup.class })
    @Size(max = 100, message = "åç§°é•¿åº¦ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦")
    private String name;

    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
}
```

---

## ğŸ“Š å·¥å…·ç±»é€‰æ‹©é€ŸæŸ¥

| éœ€æ±‚ | æ¨èå·¥å…· | è¯´æ˜ |
|------|---------|------|
| BO â†” Entity â†” VO è½¬æ¢ | `MapstructUtils.convert()` | **å¿…é¡»ä½¿ç”¨** |
| å­—ç¬¦ä¸²åˆ¤ç©º | `StringUtils.isBlank()` | æ¨èé¡¹ç›®å·¥å…·ç±» |
| é›†åˆåˆ¤ç©º | `CollUtil.isEmpty()` | Hutool |
| å¯¹è±¡åˆ¤ç©º | `ObjectUtil.isNull()` | Hutool |
| æå–é›†åˆå±æ€§ | `StreamUtils.toList()` | é¡¹ç›®å·¥å…·ç±» |
| é›†åˆè½¬ Map | `StreamUtils.toIdentityMap()` | é¡¹ç›®å·¥å…·ç±» |
| åˆ†ç»„ | `StreamUtils.groupByKey()` | é¡¹ç›®å·¥å…·ç±» |
| æ„å»ºæ ‘ | `TreeBuildUtils.build()` | é¡¹ç›®å·¥å…·ç±» |
| æ—¥æœŸæ ¼å¼åŒ– | `DateUtils.formatDateTime()` | é¡¹ç›®å·¥å…·ç±» |
| æŠ›ä¸šåŠ¡å¼‚å¸¸ | `throw new ServiceException()` | é¡¹ç›®å¼‚å¸¸ç±» |
| è·å–ç™»å½•ç”¨æˆ· | `LoginHelper.getUserId()` | é¡¹ç›®å·¥å…·ç±» |
| Redis ç¼“å­˜ | `RedisUtils.setCacheObject()` | é¡¹ç›®å·¥å…·ç±» |
| Excel å¯¼å‡º | `ExcelUtil.exportExcel()` | é¡¹ç›®å·¥å…·ç±» |
| ç”Ÿæˆ ID | `IdUtil.getSnowflakeNextId()` | Hutool |

---

## âœ… åœ¨ Service ä¸­çš„å…¸å‹ç”¨æ³•

```java
@Service
@RequiredArgsConstructor
public class XxxServiceImpl implements IXxxService {

    private final XxxMapper baseMapper;

    @Override
    public Boolean insertByBo(XxxBo bo) {
        // ä¸šåŠ¡æ ¡éªŒ
        if (isNameExists(bo.getXxxName())) {
            throw new ServiceException("åç§°å·²å­˜åœ¨");
        }

        // å¯¹è±¡è½¬æ¢ï¼ˆå¿…é¡»ä½¿ç”¨ MapstructUtilsï¼‰
        Xxx entity = MapstructUtils.convert(bo, Xxx.class);

        return baseMapper.insert(entity) > 0;
    }

    @Override
    public List<XxxVo> queryList(XxxBo bo) {
        LambdaQueryWrapper<Xxx> lqw = buildQueryWrapper(bo);
        return baseMapper.selectVoList(lqw);
    }

    private LambdaQueryWrapper<Xxx> buildQueryWrapper(XxxBo bo) {
        LambdaQueryWrapper<Xxx> lqw = Wrappers.lambdaQuery();
        // å­—ç¬¦ä¸²åˆ¤ç©ºä½¿ç”¨ StringUtils.isNotBlank
        lqw.like(StringUtils.isNotBlank(bo.getXxxName()), Xxx::getXxxName, bo.getXxxName());
        lqw.eq(StringUtils.isNotBlank(bo.getStatus()), Xxx::getStatus, bo.getStatus());
        return lqw;
    }

    private boolean isNameExists(String name) {
        return baseMapper.exists(Wrappers.<Xxx>lambdaQuery()
            .eq(Xxx::getXxxName, name));
    }
}
```

---

## ğŸ¯ æ€»ç»“

**æ ¸å¿ƒåŸåˆ™**ï¼š

- âœ… **å¯¹è±¡è½¬æ¢å¿…é¡»ä½¿ç”¨ `MapstructUtils.convert()`**ï¼ˆç¦æ­¢ BeanUtilsï¼‰
- âœ… å­—ç¬¦ä¸²åˆ¤ç©ºä½¿ç”¨ `StringUtils.isBlank()`
- âœ… é›†åˆæ“ä½œä½¿ç”¨ `StreamUtils`
- âœ… æ ‘ç»“æ„ä½¿ç”¨ `TreeBuildUtils`
- âœ… ä¸šåŠ¡å¼‚å¸¸ä½¿ç”¨ `ServiceException`
- âœ… ç™»å½•ç”¨æˆ·ä½¿ç”¨ `LoginHelper`
- âœ… ç¼“å­˜æ“ä½œä½¿ç”¨ `RedisUtils`
